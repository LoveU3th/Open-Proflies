# Author:https://github.com/Repcz
#
# 以 ';' 或 '#' 或 '//' 开头的配置文件行为注释行
#
# 最后更新时间: 2023/4/17
#
# ================

port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false
external-controller: 127.0.0.1:9090

dns:
  enable: true 
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip  
  fake-ip-range: 198.18.0.1/16 
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
    - '+.srv.nintendo.net'
    - '+.stun.playstation.net'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
    - '+.xboxlive.com'
    - 'msftconnecttest.com'
    - 'xbox.*.microsoft.com'
    - '*.battlenet.com.cn'
    - '*.battlenet.com'
    - '*.blzstatic.cn'
    - '*.battle.net'
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 114.114.114.114
  fallback:
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
    - https://dns.alidns.com/dns-query
  fallback-filter:
     geoip: true
     geoip-code: CN
     ipcidr:
       - 240.0.0.0/4
    
# proxy引用相关
pr: &pr {type: select, proxies: [🚀 自动切换, 🚀 手动切换, 🇭🇰 香港节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇸🇬 狮城节点, DIRECT]}
#pr: &pr {type: select, proxies: [🚀 自动切换, 🚀 手动切换, 🇭🇰 香港节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇨🇳 台湾节点, 🇸🇬 狮城节点, 🇬🇧 英国节点, 🇦🇺 澳洲节点, 🇮🇳 印度节点, DIRECT]}

# 订阅更新和延迟测试相关
p: &p {type: http, interval: 21600, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 1800}}

# 自动选择相关
auto: &auto {type: url-test, url: https://www.gstatic.com/generate_204, interval: 900, use: [Subscribe]}

# 手动选择相关
use: &use {type: select, use: [Subscribe]}

proxy-providers:
  Subscribe:
    <<: *p
    url: "https://sub.xeton.dev/sub?target=clash&url=你的订阅链接&list=true&udp=true"
    # 可以使用任意类型的链接替换上面文字，多个链接使用英文符号的竖杠|隔开一起写上即可
    # 也可以使用在线订阅转换，在进阶模式中勾选`输出为Node List`，将Clash订阅链接转换为只包含节点信息的配置，并替换掉整个引号""内的链接
          
proxies: null

proxy-groups:

 #分流分组

 - {name: 🌏 国外网站, <<: *pr}

 - {name: 🎬 国际媒体, <<: *pr}

 - {name: 🍎 苹果服务, <<: *pr}

 - {name: 🧩 微软服务, <<: *pr}

 - {name: 🌌 谷歌服务, <<: *pr}

 - {name: 📟 电报消息, <<: *pr}

 - {name: 🐦 推特服务, <<: *pr}

 - {name: 🎮 游戏平台, <<: *pr}
  
# - {name: 🎬 哔哩哔哩, type: select, proxies: [DIRECT, 🇭🇰 香港节点, 🇨🇳 台湾节点]}
 - {name: 🎬 哔哩哔哩, type: select, proxies: [DIRECT, 🇭🇰 香港节点]}

 - {name: 🌏 国内网站, type: select, proxies: [DIRECT, 🚀 手动切换]}
  
 - {name: 🆎 AdBlock, type: select, proxies: [REJECT, DIRECT]}
  
 - {name: 🐟 漏网之鱼, <<: *pr}
 
 #节点地区分组
 
 - {name: 🚀 手动切换, <<: *use}

 - {name: 🚀 自动切换, <<: *auto}

 - {name: 🇭🇰 香港节点, <<: *auto, filter: "港|HK|(?i)Hong"}

 - {name: 🇯🇵 日本节点, <<: *auto, filter: "日|东京|JP|(?i)Japan"}

 - {name: 🇺🇲 美国节点, <<: *auto, filter: "美|US|(?i)States|American"}

# - {name: 🇨🇳 台湾节点, <<: *auto, filter: "台|湾|TW|(?i)Taiwan"}

 - {name: 🇸🇬 狮城节点, <<: *auto, filter: "新|坡|SG|(?i)Singapore"}
  
# - {name: 🇬🇧 英国节点, <<: *auto, filter: "英|UK|(?i)Kingdom"}
  
# - {name: 🇦🇺 澳洲节点, <<: *auto, filter: "澳|AU|(?i)Austria"}
 
# - {name: 🇮🇳 印度节点, <<: *auto, filter: "印度|印|IN|India"}

rule-providers:
  Direct:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Direct/Direct.yaml
    path: ./ruleset/Direct.yaml
    interval: 86400
  Lan:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan.yaml
    path: ./ruleset/Lan.yaml
    interval: 86400
  Download:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Download/Download.yaml
    path: ./ruleset/Download.yaml
    interval: 86400
  Ad:
    type: http
    behavior: domain
    url: https://anti-ad.net/clash.yaml
    path: ./ruleset/anti-ad-clash.yaml
    interval: 86400
  GlobalMedia:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml
    path: ./ruleset/GlobalMedia.yaml
    interval: 86400
  Apple:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple_Classical.yaml
    path: ./ruleset/Apple.yaml
    interval: 86400
  Microsoft:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml
    path: ./ruleset/Microsoft.yaml
    interval: 86400
  Google:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml
    path: ./ruleset/Google.yaml
    interval: 86400
  Telegram:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml
    path: ./ruleset/Telegram.yaml
    interval: 86400
  Twitter:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml
    path: ./ruleset/Twitter.yaml
    interval: 86400
  BiliBili:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BiliBili/BiliBili.yaml
    path: ./ruleset/BiliBili.yaml
    interval: 86400
  Game:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Game/Game.yaml
    path: ./ruleset/Game.yaml
    interval: 86400
  ChinaIP:
    type: http
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/soffchen/GeoIP2-CN@release/clash-rule-provider.yml
    path: ./ruleset/ChinaIP.yaml
    interval: 86400
  ProxyLite:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ProxyLite/ProxyLite.yaml
    path: ./ruleset/ProxyLite.yaml
    interval: 86400

rules:
  - RULE-SET,Direct,DIRECT
  - RULE-SET,Lan,DIRECT
  - RULE-SET,Download,DIRECT
  - RULE-SET,Ad,🆎 AdBlock
  - RULE-SET,GlobalMedia,🎬 国际媒体
  - RULE-SET,Apple,🍎 苹果服务
  - RULE-SET,Microsoft,🧩 微软服务
  - RULE-SET,Github,🧩 微软服务
  - RULE-SET,Google,🌌 谷歌服务
  - RULE-SET,Telegram,📟 电报消息
  - RULE-SET,Twitter,🐦 推特服务
  - RULE-SET,BiliBili,🎬 哔哩哔哩
  - RULE-SET,Game,🎮 游戏平台
  - RULE-SET,ProxyLite,🌏 国外网站
  - RULE-SET,ChinaIP,🌏 国内网站
  - GEOIP,CN,🌏 国内网站,no-resolve
  - MATCH,🐟 漏网之鱼
